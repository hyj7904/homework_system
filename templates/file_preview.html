<!DOCTYPE html>
<html>
<head>
    <title>文件预览 - 作业管理系统</title>
    <meta charset="utf-8">
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .preview-container { border: 1px solid #ddd; padding: 20px; margin: 20px 0; background-color: #f9f9f9; }
        .btn { display: inline-block; padding: 8px 15px; text-decoration: none; background-color: #4CAF50; color: white; border-radius: 4px; margin-right: 10px; }
        .btn-secondary { background-color: #6c757d; }
        .file-content { white-space: pre-wrap; line-height: 1.5; }
    </style>
</head>
<body>
    <h1>文件预览</h1>

    <div class="file-info">
        <p><strong>学生:</strong> {{ submission.student.name }}</p>
        <p><strong>作业:</strong> {{ submission.assignment.title }}</p>
        <p><strong>文件类型:</strong> {{ file_type }}</p>
        <p><strong>提交时间:</strong> {{ submission.submitted_at.strftime('%Y-%m-%d %H:%M') }}</p>
    </div>

    <style>
        .container-flex {
            display: flex;
            gap: 20px;
        }
        .preview-container {
            flex: 1;
            border: 1px solid #ddd;
            padding: 20px;
            background-color: #f9f9f9;
        }
    </style>

    <div class="container-flex">
        <div class="preview-container">
            <h3>文件内容:</h3>
            <div class="file-content">{{ file_content }}</div>
        </div>

        <div class="preview-container">
            <h3>评分结果:</h3>
            <div class="file-content">{{ grader_result }}</div>
        </div>
    </div>

    <div>
        <a href="{{ url_for('download_file', submission_id=submission.id) }}" class="btn">下载文件</a>
        <a href="javascript:history.back()" class="btn btn-secondary">返回</a>
    </div>
</body>
</html>